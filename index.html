import React, { useState } from 'react';
import { Sparkles } from 'lucide-react';

const FortuneWheel = () => {
  const [result, setResult] = useState(null);
  const [isSpinning, setIsSpinning] = useState(false);

  const options = [
    { text: '–£–í–û–õ–ï–ù –ó–ê–í–¢–†–ê', emoji: 'üíÄ', color: 'from-red-500 to-red-600' },
    { text: '–£–í–û–õ–ï–ù –°–ï–ì–û–î–ù–Ø', emoji: '‚ò†Ô∏è', color: 'from-red-600 to-red-700' },
    { text: '–£–í–û–õ–ï–ù –í –ü–Ø–¢–ù–ò–¶–£', emoji: 'üî•', color: 'from-orange-500 to-red-500' },
    { text: '–ü–æ–≤—ã—à–µ–Ω–∏–µ –≤ 0.9 —Ä–∞–∑', emoji: 'üìâ', color: 'from-yellow-500 to-orange-500' },
    { text: '–ü–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏', emoji: 'üíº', color: 'from-blue-500 to-blue-600' },
    { text: '–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–ª–µ–ø—É–∑–∏–∫–æ–≤', emoji: 'üì∫', color: 'from-purple-500 to-pink-500' }
  ];

  const spinWheel = () => {
    setIsSpinning(true);
    setResult(null);

    setTimeout(() => {
      // Weighted random: —É–≤–æ–ª—å–Ω–µ–Ω–∏—è —á–∞—â–µ (70% —à–∞–Ω—Å —É–≤–æ–ª—å–Ω–µ–Ω–∏—è)
      const weights = [25, 25, 20, 10, 10, 10]; // –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
      const random = Math.random() * 100;
      let cumulative = 0;
      let selectedIndex = 0;
      
      for (let i = 0; i < weights.length; i++) {
        cumulative += weights[i];
        if (random < cumulative) {
          selectedIndex = i;
          break;
        }
      }
      
      setResult(options[selectedIndex]);
      setIsSpinning(false);
    }, 2000);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
      <div className="w-full max-w-md">
        <div className="bg-white rounded-3xl shadow-2xl p-8">
          {/* Header */}
          <div className="text-center mb-8">
            <h1 className="text-3xl font-bold text-gray-800 mb-2">
              –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã
            </h1>
            <p className="text-gray-500 text-sm">–£–∑–Ω–∞–π —Å–≤–æ—é —Å—É–¥—å–±—É!</p>
          </div>

          {/* Wheel Display */}
          <div className="relative mb-8">
            <div className={`
              w-64 h-64 mx-auto rounded-full 
              bg-gradient-to-br from-blue-500 to-purple-600
              flex items-center justify-center
              shadow-xl
              ${isSpinning ? 'animate-spin' : ''}
              transition-all duration-200
            `}>
              <div className="w-56 h-56 bg-white rounded-full flex items-center justify-center">
                {!result && !isSpinning && (
                  <Sparkles className="w-16 h-16 text-blue-500" />
                )}
                {isSpinning && (
                  <div className="text-center">
                    <div className="text-4xl mb-2">üé∞</div>
                    <div className="text-sm text-gray-600">–ö—Ä—É—Ç–∏–º...</div>
                  </div>
                )}
                {result && !isSpinning && (
                  <div className="text-center px-4">
                    <div className="text-5xl mb-3">{result.emoji}</div>
                    <div className="text-lg font-bold text-gray-800 leading-tight">
                      {result.text}
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>

          {/* Spin Button */}
          <button
            onClick={spinWheel}
            disabled={isSpinning}
            className={`
              w-full py-4 rounded-2xl font-semibold text-lg
              transition-all duration-200
              ${isSpinning 
                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' 
                : 'bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:shadow-lg hover:scale-105 active:scale-95'
              }
            `}
          >
            {isSpinning ? '–ö—Ä—É—Ç–∏–º –∫–æ–ª–µ—Å–æ...' : '–ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ'}
          </button>


        </div>

        {/* Footer */}
        <div className="text-center mt-4 text-gray-500 text-xs">
          Telegram Mini App ‚Ä¢ –í—Å–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã
        </div>
      </div>
    </div>
  );
};

export default FortuneWheel;
